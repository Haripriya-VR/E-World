<%-include('../partials/adminheader') %>

<style>
  /* Style for the larger preview div */
  #largePreview {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    justify-content: center;
    align-items: center;
  }

  #largePreview img {
    max-width: 80%;
    max-height: 80%;
  }
</style>
  <body>
    <div class="container-fluid main-content ">
      <div class="  product-content shadow  my-5  d-flex">
        <div class="container signup-details">
          <h2 class="fw-bold text-dark text-center py-4">Add Products</h2>
          <form action="/admin/addproducts" method="post" id="form" enctype="multipart/form-data">
            <div class="form-group input-control input-box py-2 ">
              <label for="productname">Product Name:</label>
              <input type="text" id="productname" name="productname" class="form-control">
              <div class="error"></div>

            </div>

            <div class="form-group input-control input-box py-2">
              <label for="Category">Select Category:</label>
              <select id="Category" name="Category" class="form-control">
                <option value="" disabled selected>Select Category</option>
                <% categories.forEach((cat)=> { %>
                  <option value="<%= cat.category %>">
                    <%= cat.category %>
                  </option>
                  <% }); %>

              </select>
              <div class="error"></div>


            </div>
            <!-- price -->
            <div class="form-group input-control input-box py-2 ">
              <label for="price">Price:</label>
              <input type="number" id="price" name="price" class="form-control">
              <div class="error"></div>
            </div>

            <div class="form-group input-control input-box py-2">
              <label for="quantity">Stock:</label>
              <input type="text" id="quantity" name="quantity" class="form-control">
              <div class="error"></div>

            </div>
           

            <!-- Image Upload -->
            <div class="form-group input-control input-box py-2">
              <div class="image">
                <% for (let i=1; i <=3; i++) { %>
                  <div class="inner-img d-flex">
                    <label for="productimage<%= i %>">Choose Image <%= i %>:</label>
                    <input type="file" id="productimage<%= i %>" name="productImages"
                      class="form-control-file productimage" onchange="getImagePreview(event, 'preview<%= i %>')"
                      multiple>
                    <div id="preview<%= i %>" class="preview-container"></div>
                  </div>
                  <% } %>
              </div>
            </div>

            <div id="largePreview">
              <div id="cropperContainer">
                <img id="cropperImage" src="" alt="Large Preview">
                <button id="cropButton">Crop</button>
              </div>
            </div>

            <!-- Description Textarea -->
            <div class="form-group input-control input-box py-3">
              <label for="productdescription">Product Description:</label>
              <textarea id="productdescription" name="description" class="form-control"
                placeholder="Enter product description"></textarea>
            </div>
            <div class="form-group input-control input-box pt-3 ">
              <button class="btn1 shadow text-white" type="submit" value="Sign In">Add Products</button>
            </div>



          </form>
        </div>
      </div>
    </div>



    <script src="/static/js/admin/product.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </body>